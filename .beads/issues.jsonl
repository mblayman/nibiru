{"id":"nb-06n","title":"Implement basic if/endif with true condition","description":"Support {% if show %}Hello World{% endif %} when condition is true","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T23:53:55.310450396-05:00","updated_at":"2025-11-10T00:00:12.069728634-05:00","closed_at":"2025-11-10T00:00:12.069728634-05:00","close_reason":"Completed basic if/endif implementation with conditional rendering working correctly","dependencies":[{"issue_id":"nb-06n","depends_on_id":"nb-e94","type":"blocks","created_at":"2025-11-09T23:53:55.312277305-05:00","created_by":"daemon"}]}
{"id":"nb-0dl","title":"Handle non-iterable values in for loops gracefully","description":"Ensure {% for item in non_iterable %} doesn't crash (may produce empty output)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T18:51:51.573400891-05:00","updated_at":"2025-11-11T22:47:49.526279072-05:00","closed_at":"2025-11-11T22:47:49.526279072-05:00","close_reason":"Closed via update"}
{"id":"nb-0g9","title":"Implement capitalize filter","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T23:38:39.991704948-05:00","updated_at":"2025-11-12T23:28:37.980785831-05:00","closed_at":"2025-11-12T23:28:37.980785831-05:00","close_reason":"Completed capitalize filter implementation with comprehensive tests"}
{"id":"nb-0ie","title":"Implement validation to reject empty templates.directory values","description":"Implement validation in Config.load() to reject empty string values for templates.directory. This covers the test_config_validation_empty_directory test case.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-17T23:19:59.371839293-05:00","updated_at":"2025-11-17T23:30:46.23651888-05:00","closed_at":"2025-11-17T23:30:46.23651888-05:00","close_reason":"Extended Config.validate() to reject empty string values for templates.directory, ensuring non-empty directory paths"}
{"id":"nb-0pb","title":"Implement nested if/endif blocks (outer condition false)","description":"Support nested {% if %} blocks where outer condition is false (inner never evaluated)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T23:54:19.79950968-05:00","updated_at":"2025-11-11T18:27:15.022686587-05:00","closed_at":"2025-11-11T18:27:15.022686587-05:00","close_reason":"Nested if/endif blocks with outer condition false working correctly - functionality already implemented","dependencies":[{"issue_id":"nb-0pb","depends_on_id":"nb-e94","type":"blocks","created_at":"2025-11-09T23:54:19.801123528-05:00","created_by":"daemon"}]}
{"id":"nb-0t6","title":"Implement if/endif with nested property access","description":"Support {% if user.profile.settings.enabled %} with deep object property access","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T23:54:03.623571845-05:00","updated_at":"2025-11-10T00:07:42.588750093-05:00","closed_at":"2025-11-10T00:07:42.588750093-05:00","close_reason":"Completed if/endif with nested property access - supports user.profile.settings.enabled syntax","dependencies":[{"issue_id":"nb-0t6","depends_on_id":"nb-e94","type":"blocks","created_at":"2025-11-09T23:54:03.625747661-05:00","created_by":"daemon"}]}
{"id":"nb-0zz","title":"Implement filter pipeline invalid syntax missing filter error (test_filter_pipeline_invalid_syntax_missing_filter)","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T23:55:08.082719324-05:00","updated_at":"2025-11-12T22:57:49.667885276-05:00","closed_at":"2025-11-12T22:57:49.667885276-05:00","close_reason":"Completed filter pipeline invalid syntax missing filter error implementation"}
{"id":"nb-18a","title":"Implement truthy value handling (true, numbers, non-empty strings)","description":"Ensure {% if value %} treats true, 1, 'hello' as truthy","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T23:54:00.27311359-05:00","updated_at":"2025-11-10T00:03:36.434128163-05:00","closed_at":"2025-11-10T00:03:36.434128163-05:00","close_reason":"Completed truthy value handling - true, numbers, and non-empty strings all render content","dependencies":[{"issue_id":"nb-18a","depends_on_id":"nb-e94","type":"blocks","created_at":"2025-11-09T23:54:00.275306438-05:00","created_by":"daemon"}]}
{"id":"nb-1q0","title":"Implement directory unloading and cleanup","description":"Add Template.unload_from_directory() to remove templates loaded from a specific directory. Track which templates came from which directories for selective cleanup.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-15T00:21:30.733084052-05:00","updated_at":"2025-11-15T23:35:59.580033794-05:00","closed_at":"2025-11-15T23:35:59.580033794-05:00"}
{"id":"nb-1rj","title":"Implement least connection load balancing algorithm","description":"Replace round-robin with least connection algorithm. Parent maintains connection count per worker, selects worker with minimum count for new connections, increments on assignment, decrements on completion notification.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-01T12:22:59.917445819-05:00","updated_at":"2026-01-01T12:22:59.917445819-05:00","labels":["algorithm","least-connection","load-balancing"],"dependencies":[{"issue_id":"nb-1rj","depends_on_id":"nb-x43","type":"blocks","created_at":"2026-01-01T12:23:00.77182241-05:00","created_by":"daemon"}]}
{"id":"nb-1tl","title":"Implement filter pipeline non-function filter error (test_filter_pipeline_non_function_filter)","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T23:55:12.22940975-05:00","updated_at":"2025-11-12T22:57:52.194916886-05:00","closed_at":"2025-11-12T22:57:52.194916886-05:00","close_reason":"Completed filter pipeline non-function filter error implementation"}
{"id":"nb-25a","title":"Implement if/endif with complex HTML content","description":"Support {% if %} blocks containing complex HTML structures and multiple elements","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T23:54:16.703247534-05:00","updated_at":"2025-11-11T18:08:16.956042671-05:00","closed_at":"2025-11-11T18:08:16.956042671-05:00","close_reason":"Complex HTML content in if/endif blocks working correctly - test updated to account for proper whitespace handling","dependencies":[{"issue_id":"nb-25a","depends_on_id":"nb-e94","type":"blocks","created_at":"2025-11-09T23:54:16.704667216-05:00","created_by":"daemon"}]}
{"id":"nb-29p","title":"Handle orphaned endfor without matching for","description":"Detect and report error for {% endfor %} without matching {% for %}","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T18:51:42.769452981-05:00","updated_at":"2025-11-11T22:37:08.451676535-05:00","closed_at":"2025-11-11T22:37:08.451676535-05:00","close_reason":"Closed via update"}
{"id":"nb-2pa","title":"Implement strict validation to reject unknown config settings","description":"Implement strict validation in Config.load() to reject config files with unknown/extra settings (treat as failures to catch typos). This covers the test_load_config_with_extra_settings test case.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-17T23:20:06.111382817-05:00","updated_at":"2025-11-17T23:33:11.464318856-05:00","closed_at":"2025-11-17T23:33:11.464318856-05:00","close_reason":"Implemented strict validation in Config.validate() to reject unknown config settings at both top-level and templates section levels"}
{"id":"nb-2ru","title":"Implement test_block_default_content - block default content when not overridden","description":"Implement test case for blocks with default content that is preserved when child template doesn't override the block.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-14T23:25:59.852042104-05:00","updated_at":"2025-11-14T23:55:46.088841797-05:00","closed_at":"2025-11-14T23:55:46.088841797-05:00","close_reason":"Formatting issues fixed by user"}
{"id":"nb-37w","title":"Implement uppercase filter","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T23:38:36.203008627-05:00","updated_at":"2025-11-12T23:12:22.288598029-05:00","closed_at":"2025-11-12T23:12:22.288598029-05:00","close_reason":"Completed uppercase filter implementation with comprehensive tests"}
{"id":"nb-398","title":"Design template component system","description":"Design the component-based template system that will make templates easy for AI to create and compose. Define component structure, registration, and usage patterns.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-08T22:46:44.812724075-05:00","updated_at":"2025-11-09T15:42:14.029586034-05:00","closed_at":"2025-11-09T15:42:14.029586034-05:00"}
{"id":"nb-3it","title":"Implement if/endif with complex boolean expressions","description":"Support {% if count \u003e 0 and visible %} with arithmetic and logical operators","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T23:54:05.18481403-05:00","updated_at":"2025-11-10T00:08:36.711385166-05:00","closed_at":"2025-11-10T00:08:36.711385166-05:00","close_reason":"Completed if/endif with complex boolean expressions - supports count \u003e 0 and visible syntax","dependencies":[{"issue_id":"nb-3it","depends_on_id":"nb-e94","type":"blocks","created_at":"2025-11-09T23:54:05.186194839-05:00","created_by":"daemon"}]}
{"id":"nb-3nq","title":"Add comprehensive tests for directory loading","description":"Create test suite covering directory scanning, dependency resolution, error cases (missing files, circular deps), and integration with existing template functionality.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-15T00:21:30.758924941-05:00","updated_at":"2025-11-17T01:24:12.608639026-05:00","closed_at":"2025-11-17T01:24:12.608639026-05:00","close_reason":"Comprehensive tests for directory loading are already implemented. The test suite includes tests for directory scanning, dependency resolution, error cases (missing files, circular deps), and integration with existing template functionality.","dependencies":[{"issue_id":"nb-3nq","depends_on_id":"nb-3os","type":"blocks","created_at":"2025-11-15T00:21:30.761674728-05:00","created_by":"daemon"}]}
{"id":"nb-3os","title":"Design template directory loading with dependency analysis\",\"description\":\"Design directory-based template loading system with automatic dependency resolution. Key decisions: single templates directory, no relative extends paths, auto-register all files by relative path, separate API from Template.register().\",\"design\":null,\"acceptance_criteria\":null,\"notes\":null,\"external_ref\":null,\"priority\":2,\"issue_type\":\"task\",\"assignee\":null,\"labels\":[],\"id\":\"nb-template-dir-design","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-14T23:16:43.219147295-05:00","updated_at":"2025-11-17T01:24:16.689142313-05:00","closed_at":"2025-11-17T01:24:16.689142313-05:00","close_reason":"Template directory loading with dependency analysis is fully implemented. All child issues completed: directory scanning, dependency graph analysis, C-level traversal functions, main API, template naming/path resolution, comprehensive tests, and directory unloading (cancelled as not needed)."}
{"id":"nb-46m","title":"Handle empty array iteration gracefully","description":"Ensure {% for item in items %} produces no output when items array is empty","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T18:51:34.962365666-05:00","updated_at":"2025-11-11T22:43:48.865745834-05:00","closed_at":"2025-11-11T22:43:48.865745834-05:00","close_reason":"Closed via update"}
{"id":"nb-4ab","title":"Support complex expressions in for loop variables","description":"Allow expressions like {{ item.price * 1.1 }} inside for loops","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T18:51:40.100466338-05:00","updated_at":"2025-11-11T22:35:15.448433555-05:00","closed_at":"2025-11-11T22:35:15.448433555-05:00","close_reason":"Closed via update"}
{"id":"nb-4f5","title":"Handle unclosed for loop blocks with error","description":"Detect and report error for {% for item in items %} without matching {% endfor %}","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T18:51:41.831059401-05:00","updated_at":"2025-11-11T22:36:31.815469273-05:00","closed_at":"2025-11-11T22:36:31.815469273-05:00","close_reason":"Closed via update"}
{"id":"nb-4kr","title":"Implement lowercase filter","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T23:38:37.708427704-05:00","updated_at":"2025-11-12T23:23:36.205535421-05:00","closed_at":"2025-11-12T23:23:36.205535421-05:00","close_reason":"Completed lowercase filter implementation with comprehensive tests"}
{"id":"nb-4tm","title":"Implement filter pipeline unknown filter error (test_filter_pipeline_unknown_filter)","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T23:55:08.057057424-05:00","updated_at":"2025-11-12T22:57:48.64359617-05:00","closed_at":"2025-11-12T22:57:48.64359617-05:00","close_reason":"Completed filter pipeline unknown filter error implementation"}
{"id":"nb-4x7","title":"Add template naming and path resolution","description":"Implement relative path to template name conversion. Ensure consistent naming (relative/path.html) and validate that {% extends %} statements use full relative paths without .. or ./ prefixes.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-15T00:21:30.735421324-05:00","updated_at":"2025-11-17T01:24:10.949332689-05:00","closed_at":"2025-11-17T01:24:10.949332689-05:00","close_reason":"Template naming and path resolution is already implemented. Templates are registered using their relative path as the template name, and the loader validates extends statements use proper relative paths.","dependencies":[{"issue_id":"nb-4x7","depends_on_id":"nb-3os","type":"blocks","created_at":"2025-11-15T00:21:30.739890092-05:00","created_by":"daemon"}]}
{"id":"nb-51i","title":"Implement test_empty_extends - error for empty extends directive","description":"Implement test case for proper error handling when {% extends %} has an empty or invalid template name.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-14T23:26:37.057232669-05:00","updated_at":"2025-11-14T23:47:45.829336231-05:00","closed_at":"2025-11-14T23:47:45.829336231-05:00","close_reason":"Test implemented and passing"}
{"id":"nb-59h","title":"Implement basic preforking with round-robin distribution","description":"Modify main() to use preforked workers instead of single-threaded processing. Implement round-robin load distribution initially, with workers receiving FDs and processing connections serially. Each worker should have its own Lua state.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-01T12:22:49.293164304-05:00","updated_at":"2026-01-01T12:22:49.293164304-05:00","labels":["basic-concurrency","preforking","round-robin"],"dependencies":[{"issue_id":"nb-59h","depends_on_id":"nb-ar3","type":"blocks","created_at":"2026-01-01T12:22:50.523778314-05:00","created_by":"daemon"},{"issue_id":"nb-59h","depends_on_id":"nb-i1c","type":"blocks","created_at":"2026-01-01T12:22:51.575778818-05:00","created_by":"daemon"},{"issue_id":"nb-59h","depends_on_id":"nb-eax","type":"blocks","created_at":"2026-01-01T12:22:52.981792581-05:00","created_by":"daemon"}]}
{"id":"nb-5bv","title":"Write user documentation in docs/","description":"Create comprehensive user documentation including API reference, usage examples, and tutorials in the docs/ directory.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T23:23:49.667727675-05:00","updated_at":"2025-11-30T18:39:30.640778343-05:00","closed_at":"2025-11-30T18:39:30.640778343-05:00","close_reason":"Completed during implementation","dependencies":[{"issue_id":"nb-5bv","depends_on_id":"nb-e06","type":"blocks","created_at":"2025-11-09T23:23:49.669410701-05:00","created_by":"daemon"}]}
{"id":"nb-5dw","title":"Implement multiple if/endif blocks in single template","description":"Support multiple independent {% if %} blocks in the same template","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T23:54:14.987142364-05:00","updated_at":"2025-11-10T00:29:27.782094456-05:00","closed_at":"2025-11-10T00:29:27.782094456-05:00","close_reason":"Multiple if/endif blocks in single template working correctly - test updated to account for proper whitespace handling","dependencies":[{"issue_id":"nb-5dw","depends_on_id":"nb-e94","type":"blocks","created_at":"2025-11-09T23:54:14.989110759-05:00","created_by":"daemon"}]}
{"id":"nb-5jn","title":"Implement format filter","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T23:38:40.166596793-05:00","updated_at":"2025-11-12T23:38:49.893544279-05:00","closed_at":"2025-11-12T23:38:49.893544279-05:00","close_reason":"Completed format filter implementation with comprehensive tests"}
{"id":"nb-5ne","title":"Implement indexed array iteration with ipairs()","description":"Support {% for index, item in ipairs(items) %} syntax for indexed iteration","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T18:51:37.251762123-05:00","updated_at":"2025-11-11T22:13:04.525241889-05:00","closed_at":"2025-11-11T22:13:04.525241889-05:00","close_reason":"Closed via update"}
{"id":"nb-5s7","title":"Implement filter pipeline nil handling (test_filter_pipeline_nil_handling)","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T23:55:08.005912666-05:00","updated_at":"2025-11-12T22:57:46.311054729-05:00","closed_at":"2025-11-12T22:57:46.311054729-05:00","close_reason":"Completed filter pipeline nil handling implementation"}
{"id":"nb-680","title":"Implement reverse filter","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T23:38:40.116981486-05:00","updated_at":"2025-11-12T23:38:03.921018001-05:00","closed_at":"2025-11-12T23:38:03.921018001-05:00","close_reason":"Completed reverse filter implementation with comprehensive tests"}
{"id":"nb-69m","title":"Implement filter pipeline parsing (|\u003e)","description":"Add filter support with pipeline operator |\u003e for function calls like {{ value |\u003e filter1 |\u003e filter2 }}.\n\n## Design Details\n\n### Syntax\n{{ value |\u003e filter1 |\u003e filter2(arg1, arg2) }}\n\n### Core Concepts\n- Pipeline operator |\u003e chains filter functions left-to-right\n- Filters are functions that take the previous result as first argument  \n- Filters can accept additional arguments in parentheses\n- Filters have access to template context for dynamic behavior\n\n### Built-in Filters\n- String: uppercase, lowercase, capitalize, truncate(length)\n- Array/Object: length, first, last, reverse\n- Utility: default(value), format(pattern)\n\n### Implementation\n- Filter registry: Global table of named filter functions\n- Compile-time resolution: Look up filters by name during compilation\n- Generated code: filter1(filter2(value, arg1), arg2)\n- Error handling: Clear messages for undefined/invalid filters\n\n### API\nTemplate.register_filter(name, function)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T23:22:48.17114031-05:00","updated_at":"2025-11-12T23:46:18.185707964-05:00","closed_at":"2025-11-12T23:46:18.185707964-05:00","close_reason":"All dependencies completed - filter pipeline parsing with |\u003e operator is fully implemented and tested","dependencies":[{"issue_id":"nb-69m","depends_on_id":"nb-37w","type":"blocks","created_at":"2025-11-11T23:40:12.334128638-05:00","created_by":"daemon"},{"issue_id":"nb-69m","depends_on_id":"nb-4kr","type":"blocks","created_at":"2025-11-11T23:40:15.258912378-05:00","created_by":"daemon"},{"issue_id":"nb-69m","depends_on_id":"nb-0g9","type":"blocks","created_at":"2025-11-11T23:40:15.313815237-05:00","created_by":"daemon"},{"issue_id":"nb-69m","depends_on_id":"nb-tmp","type":"blocks","created_at":"2025-11-11T23:40:15.369826548-05:00","created_by":"daemon"},{"issue_id":"nb-69m","depends_on_id":"nb-77l","type":"blocks","created_at":"2025-11-11T23:40:15.422813209-05:00","created_by":"daemon"},{"issue_id":"nb-69m","depends_on_id":"nb-a5j","type":"blocks","created_at":"2025-11-11T23:40:15.474892602-05:00","created_by":"daemon"},{"issue_id":"nb-69m","depends_on_id":"nb-mpo","type":"blocks","created_at":"2025-11-11T23:40:15.529420969-05:00","created_by":"daemon"},{"issue_id":"nb-69m","depends_on_id":"nb-680","type":"blocks","created_at":"2025-11-11T23:40:15.584749128-05:00","created_by":"daemon"},{"issue_id":"nb-69m","depends_on_id":"nb-y4t","type":"blocks","created_at":"2025-11-11T23:40:15.638968617-05:00","created_by":"daemon"},{"issue_id":"nb-69m","depends_on_id":"nb-5jn","type":"blocks","created_at":"2025-11-11T23:40:15.692955843-05:00","created_by":"daemon"},{"issue_id":"nb-69m","depends_on_id":"nb-e8m","type":"blocks","created_at":"2025-11-11T23:56:11.928518843-05:00","created_by":"daemon"},{"issue_id":"nb-69m","depends_on_id":"nb-eqx","type":"blocks","created_at":"2025-11-11T23:56:18.273891324-05:00","created_by":"daemon"},{"issue_id":"nb-69m","depends_on_id":"nb-etv","type":"blocks","created_at":"2025-11-11T23:56:18.327783424-05:00","created_by":"daemon"},{"issue_id":"nb-69m","depends_on_id":"nb-iw9","type":"blocks","created_at":"2025-11-11T23:56:18.377049625-05:00","created_by":"daemon"},{"issue_id":"nb-69m","depends_on_id":"nb-93s","type":"blocks","created_at":"2025-11-11T23:56:18.429742796-05:00","created_by":"daemon"},{"issue_id":"nb-69m","depends_on_id":"nb-wj8","type":"blocks","created_at":"2025-11-11T23:56:18.483770172-05:00","created_by":"daemon"},{"issue_id":"nb-69m","depends_on_id":"nb-5s7","type":"blocks","created_at":"2025-11-11T23:56:25.644828582-05:00","created_by":"daemon"},{"issue_id":"nb-69m","depends_on_id":"nb-jaz","type":"blocks","created_at":"2025-11-11T23:56:25.699181775-05:00","created_by":"daemon"},{"issue_id":"nb-69m","depends_on_id":"nb-4tm","type":"blocks","created_at":"2025-11-11T23:56:25.754392179-05:00","created_by":"daemon"},{"issue_id":"nb-69m","depends_on_id":"nb-0zz","type":"blocks","created_at":"2025-11-11T23:56:25.808391511-05:00","created_by":"daemon"},{"issue_id":"nb-69m","depends_on_id":"nb-dpq","type":"blocks","created_at":"2025-11-11T23:56:25.86032897-05:00","created_by":"daemon"},{"issue_id":"nb-69m","depends_on_id":"nb-1tl","type":"blocks","created_at":"2025-11-11T23:56:31.37692439-05:00","created_by":"daemon"},{"issue_id":"nb-69m","depends_on_id":"nb-y1w","type":"blocks","created_at":"2025-11-11T23:56:31.429611369-05:00","created_by":"daemon"},{"issue_id":"nb-69m","depends_on_id":"nb-bzc","type":"blocks","created_at":"2025-11-11T23:56:31.483932535-05:00","created_by":"daemon"},{"issue_id":"nb-69m","depends_on_id":"nb-cx4","type":"blocks","created_at":"2025-11-11T23:56:31.540874758-05:00","created_by":"daemon"}]}
{"id":"nb-6ig","title":"Implement test_unclosed_block - error for missing endblock","description":"Implement test case for proper error handling when {% block %} is not closed with {% endblock %}.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-14T23:26:23.885302909-05:00","updated_at":"2025-11-14T23:47:45.427088849-05:00","closed_at":"2025-11-14T23:47:45.427088849-05:00","close_reason":"Test implemented and passing"}
{"id":"nb-6ij","title":"Handle malformed boolean expressions in conditions","description":"Detect and report error for malformed expressions like {% if user.name == \"test\" and %}","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T23:54:32.304688151-05:00","updated_at":"2025-11-11T18:27:06.923803777-05:00","closed_at":"2025-11-11T18:27:06.923803777-05:00","close_reason":"Malformed boolean expressions in conditions now properly detected and reported with clear error messages during compilation","dependencies":[{"issue_id":"nb-6ij","depends_on_id":"nb-e94","type":"blocks","created_at":"2025-11-09T23:54:32.307032875-05:00","created_by":"daemon"}]}
{"id":"nb-6sd","title":"Implement basic for loop array iteration","description":"Support {% for item in items %}...{% endfor %} syntax for basic array iteration","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T18:51:32.181074462-05:00","updated_at":"2025-11-11T18:54:37.947352153-05:00","closed_at":"2025-11-11T18:54:37.947352153-05:00","close_reason":"Closed via update","dependencies":[{"issue_id":"nb-6sd","depends_on_id":"nb-mze","type":"blocks","created_at":"2025-11-11T18:51:32.18170863-05:00","created_by":"daemon"}]}
{"id":"nb-77l","title":"Implement length filter","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T23:38:40.039587629-05:00","updated_at":"2025-11-12T23:35:18.187936801-05:00","closed_at":"2025-11-12T23:35:18.187936801-05:00","close_reason":"Completed length filter implementation with comprehensive tests"}
{"id":"nb-7ld","title":"Design template component system","description":"Design the component-based template system that will make templates easy for AI to create and compose. Define component structure, registration, and usage patterns.","design":"Component-based template system design decisions:\n- Components use Capital naming (Button, not button) to distinguish from HTML elements\n- XML-style syntax: \u003cButton class=\\\"primary\\\" text=\\\"Save\\\"/\u003e\n- Components inlined during compilation (no function call overhead)\n- Template string registration API\n- Top-level templates compile to single functions with everything inlined\n- Self-closing syntax: \u003cButton/\u003e for simple components, \u003cButton\u003e\u003c/Button\u003e for content\n- Compilation: Components become inline string concatenation in final function\n- ERROR SEMANTICS: Compile-time validation of component names with clear error messages\n- Validation: Registry lookup during compilation, suggests corrections for typos","acceptance_criteria":"Design document completed with syntax specification","notes":"Final test of auto-sync functionality","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-08T22:48:44.452692648-05:00","updated_at":"2025-11-09T00:46:09.328010509-05:00","closed_at":"2025-11-09T00:46:09.328010509-05:00","dependencies":[{"issue_id":"nb-7ld","depends_on_id":"nb-ib4","type":"parent-child","created_at":"2025-11-08T22:48:49.49595573-05:00","created_by":"daemon"}]}
{"id":"nb-7lw","title":"Handle malformed for loop syntax - missing 'in' keyword","description":"Detect and report error for {% for item items %} (missing 'in' keyword)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T18:51:48.225829769-05:00","updated_at":"2025-11-11T22:40:39.746364144-05:00","closed_at":"2025-11-11T22:40:39.746364144-05:00","close_reason":"Closed via update"}
{"id":"nb-7s3","title":"Implement validation for config files that don't return tables","description":"Implement validation in Config.load() to ensure config.lua returns a table, not other types. This covers the test_load_non_table_return test case.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-17T23:19:56.647570129-05:00","updated_at":"2025-11-17T23:34:38.772768347-05:00","closed_at":"2025-11-17T23:34:38.772768347-05:00","close_reason":"Closed via update"}
{"id":"nb-7yf","title":"Design comprehensive template syntax and features","description":"Design the full template syntax including expressions, control flow, filters, partials, and other advanced features beyond basic variable interpolation.","design":"Template macros design:\\n- Skipped - components provide sufficient reusable functionality ✅\\n- No need for additional macro system\\n- Template design is feature-complete\\n- Focus on components for reusable UI elements","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-08T23:32:41.739285357-05:00","updated_at":"2025-11-09T10:16:31.244887155-05:00","closed_at":"2025-11-09T10:16:31.244887155-05:00","close_reason":"Template syntax design completed - comprehensive feature set designed","dependencies":[{"issue_id":"nb-7yf","depends_on_id":"nibiru-7ld","type":"blocks","created_at":"2025-11-08T23:32:41.742832576-05:00","created_by":"daemon"},{"issue_id":"nb-7yf","depends_on_id":"nb-7ld","type":"blocks","created_at":"2025-11-08T23:32:41.742832576-05:00","created_by":"daemon"}]}
{"id":"nb-82e","title":"Implement compile-time validation and error checking","description":"Add comprehensive validation during template compilation to catch errors early and provide clear error messages.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T23:23:43.448184957-05:00","updated_at":"2025-11-30T18:40:46.026277009-05:00","closed_at":"2025-11-30T18:40:46.026277009-05:00","close_reason":"Already implemented - system provides compile-time validation and error checking","dependencies":[{"issue_id":"nb-82e","depends_on_id":"nb-8vk","type":"blocks","created_at":"2025-11-09T23:23:43.450183709-05:00","created_by":"daemon"}]}
{"id":"nb-8ek","title":"Implement template inheritance ({% extends %}, {% block %})","description":"Add template inheritance support with {% extends \"base.html\" %} and {% block name %}...{% endblock %} syntax.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T23:22:46.163281732-05:00","updated_at":"2025-11-17T01:21:23.941463781-05:00","closed_at":"2025-11-17T01:21:23.941463781-05:00","close_reason":"Template inheritance with {% extends %} and {% block %} syntax has been fully implemented, including multi-level inheritance support."}
{"id":"nb-8tq","title":"Ensure safe execution environment","description":"Implement sandboxing and security measures to ensure templates execute safely without access to dangerous functions.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T23:23:45.673876237-05:00","updated_at":"2025-12-18T01:05:28.945817754-05:00","closed_at":"2025-12-18T01:05:28.945817754-05:00","close_reason":"Cancelled - not needed at this time","dependencies":[{"issue_id":"nb-8tq","depends_on_id":"nb-8vk","type":"blocks","created_at":"2025-11-09T23:23:45.675126337-05:00","created_by":"daemon"}]}
{"id":"nb-8vk","title":"Phase 3: Compilation \u0026 Optimization","description":"Optimize template compilation, add validation, and ensure safe execution environment.","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-11-09T23:22:49.210785182-05:00","updated_at":"2025-12-18T01:07:38.301196724-05:00","closed_at":"2025-12-18T01:07:38.301196724-05:00","close_reason":"Cancelled - not needed at this time"}
{"id":"nb-93s","title":"Implement filter pipeline expression arguments (test_filter_pipeline_expression_arguments)","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T23:55:00.29431927-05:00","updated_at":"2025-11-12T22:57:42.033597659-05:00","closed_at":"2025-11-12T22:57:42.033597659-05:00","close_reason":"Completed filter pipeline expression arguments implementation"}
{"id":"nb-94b","title":"Implement Template.load_from_directory() API","description":"Implement the main API function that orchestrates directory scanning, dependency analysis, and template registration. Handle options for recursive loading, error handling, and integration with existing registry.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-15T00:21:28.280090975-05:00","updated_at":"2025-11-16T15:42:42.585714855-05:00","closed_at":"2025-11-16T15:42:42.585714855-05:00","close_reason":"TemplateLoader.from_directory() API implemented with directory scanning, template registration, error handling, and registry integration","dependencies":[{"issue_id":"nb-94b","depends_on_id":"nb-3os","type":"blocks","created_at":"2025-11-15T00:21:28.284305304-05:00","created_by":"daemon"}]}
{"id":"nb-9g0","title":"Implement directory unloading and cleanup","description":"Add Template.unload_from_directory() to remove templates loaded from a specific directory. Track which templates came from which directories for selective cleanup.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-15T00:21:32.588971302-05:00","updated_at":"2025-11-17T01:24:15.243952505-05:00","closed_at":"2025-11-17T01:24:15.243952505-05:00","close_reason":"Directory unloading and cleanup feature is not needed for the current requirements.","dependencies":[{"issue_id":"nb-9g0","depends_on_id":"nb-3os","type":"blocks","created_at":"2025-11-15T00:21:32.592120661-05:00","created_by":"daemon"}]}
{"id":"nb-9p3","title":"Implement test_orphaned_endblock - error for endblock without block","description":"Implement test case for proper error handling when {% endblock %} appears without a matching {% block %}.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-14T23:26:27.837559653-05:00","updated_at":"2025-11-14T23:47:45.69805618-05:00","closed_at":"2025-11-14T23:47:45.69805618-05:00","close_reason":"Test implemented and passing"}
{"id":"nb-9sw","title":"Add native Markdown support with YAML frontmatter parsing","description":"Implement a Markdown parser that supports YAML frontmatter. The parser should accept a string input and return a table with frontmatter (parsed YAML), raw markdown, and rendered HTML output.","status":"closed","priority":2,"issue_type":"feature","assignee":"matt","created_at":"2025-12-06T16:52:43.56438943-05:00","updated_at":"2025-12-06T20:50:54.866957843-05:00","closed_at":"2025-12-06T20:50:54.866957843-05:00","close_reason":"Closed via update"}
{"id":"nb-9uo","title":"Implement nested if/endif blocks (inner condition false)","description":"Support nested {% if %} blocks where outer is true but inner condition is false","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T23:54:21.409939324-05:00","updated_at":"2025-11-11T18:15:48.689341809-05:00","closed_at":"2025-11-11T18:15:48.689341809-05:00","close_reason":"Nested if/endif blocks with inner condition false working correctly - test updated to account for proper whitespace handling","dependencies":[{"issue_id":"nb-9uo","depends_on_id":"nb-e94","type":"blocks","created_at":"2025-11-09T23:54:21.41133954-05:00","created_by":"daemon"}]}
{"id":"nb-a5j","title":"Implement first filter","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T23:38:40.066132883-05:00","updated_at":"2025-11-12T23:36:14.284599781-05:00","closed_at":"2025-11-12T23:36:14.284599781-05:00","close_reason":"Completed first filter implementation with comprehensive tests"}
{"id":"nb-a72","title":"Implement error handling for invalid Lua syntax in config files","description":"Implement proper error handling in Config.load() when config.lua contains invalid Lua syntax. This covers the test_load_invalid_lua_syntax test case.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-17T23:19:55.362035598-05:00","updated_at":"2025-11-17T23:34:42.782067463-05:00","closed_at":"2025-11-17T23:34:42.782067463-05:00","close_reason":"Closed via update"}
{"id":"nb-a95","title":"Fix template rendering bug with function arguments in loops","description":"Fixed issue where template function calls with property access arguments (like route('name', page.slug)) in for loops would fail with 'attempt to index a nil value (field context)' error. The problem was incorrect parsing of function arguments that added double 'context.' prefixes to identifiers.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-27T11:44:15.969056302-05:00","updated_at":"2025-12-27T11:44:17.708842952-05:00","closed_at":"2025-12-27T11:44:17.708842952-05:00","close_reason":"Fixed by improving function argument parsing in template.lua to properly handle expressions in loop contexts"}
{"id":"nb-abf","title":"Add performance optimizations","description":"Implement performance optimizations including caching, lazy evaluation, and efficient data structures.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T23:23:44.544999169-05:00","updated_at":"2025-12-18T01:04:42.392369402-05:00","closed_at":"2025-12-18T01:04:42.392369402-05:00","close_reason":"Cancelled - not needed at this time","dependencies":[{"issue_id":"nb-abf","depends_on_id":"nb-8vk","type":"blocks","created_at":"2025-11-09T23:23:44.546323569-05:00","created_by":"daemon"}]}
{"id":"nb-aew","title":"Implement complete inheritance chain resolution for multi-level template inheritance","description":"Fix multi-level template inheritance by resolving entire inheritance chains at compile time rather than level-by-level merging. This allows blocks to be properly overridden across multiple inheritance levels.\n\nCurrent issue: Templates are processed level-by-level during registration, causing blocks to be expanded too early and preventing grandchild templates from overriding blocks defined in grandparents.\n\nSolution: When compiling a template, build the complete inheritance chain, collect all block definitions across the chain, resolve final block content by walking the inheritance hierarchy, and generate the final compiled template with all blocks properly resolved.\n\nThis maintains eager evaluation while fixing inheritance semantics.\u003c/description\u003e\n\u003cparameter name=\"issue_type\"\u003efeature","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-17T00:08:42.596354448-05:00","updated_at":"2025-11-17T01:21:19.16363721-05:00","closed_at":"2025-11-17T01:21:19.16363721-05:00","close_reason":"Completed implementation of complete inheritance chain resolution. Multi-level template inheritance now works correctly with proper block overriding across inheritance chains.","labels":["inheritance","multi-level-inheritance","template-compilation"]}
{"id":"nb-aj0","title":"Implement template dependency graph analysis","description":"Implement dependency graph building from {% extends %} statements. Create topological sorting to ensure parent templates load before children. Detect and report circular dependencies.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-15T00:21:27.567877905-05:00","updated_at":"2025-11-16T23:38:22.611173677-05:00","closed_at":"2025-11-16T23:38:22.611173677-05:00","close_reason":"Closed via update","dependencies":[{"issue_id":"nb-aj0","depends_on_id":"nb-3os","type":"blocks","created_at":"2025-11-15T00:21:27.572688054-05:00","created_by":"daemon"},{"issue_id":"nb-aj0","depends_on_id":"nb-qs7","type":"blocks","created_at":"2025-11-16T23:32:43.123677728-05:00","created_by":"daemon"}]}
{"id":"nb-ar3","title":"Implement WorkerPool data structure and process management","description":"Create WorkerPool struct to track worker processes, UNIX sockets, and connection counts. Implement process forking logic with proper socket pair setup for bidirectional communication between parent and workers.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-01T12:22:43.379085172-05:00","updated_at":"2026-01-01T13:31:25.394128583-05:00","closed_at":"2026-01-01T13:31:25.394128583-05:00","close_reason":"Closed via update","labels":["data-structures","forking","process-management"]}
{"id":"nb-ass","title":"Create easy way to work with registered templates","description":"Add functionality to easily list, view, and manage registered templates in the nibiru application.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-30T18:47:27.901731243-05:00","updated_at":"2025-12-18T01:00:33.638629383-05:00","closed_at":"2025-12-18T01:00:33.638629383-05:00","close_reason":"Cancelled - no longer relevant"}
{"id":"nb-at2","title":"Handle empty directory loading gracefully","description":"Ensure TemplateLoader.from_directory() handles empty directories gracefully. Should succeed without error but not register any templates when the directory contains no files.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-16T15:35:51.733121491-05:00","updated_at":"2025-11-16T15:39:17.331280409-05:00","closed_at":"2025-11-16T15:39:17.331280409-05:00","close_reason":"Empty directory loading handled gracefully - succeeds without registering any templates","dependencies":[{"issue_id":"nb-at2","depends_on_id":"nb-94b","type":"blocks","created_at":"2025-11-16T15:36:01.320836877-05:00","created_by":"daemon"}]}
{"id":"nb-ayp","title":"Handle malformed for loop syntax - missing variable","description":"Detect and report error for {% for in items %} (missing loop variable)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T18:51:43.528064845-05:00","updated_at":"2025-11-11T22:38:03.477616809-05:00","closed_at":"2025-11-11T22:38:03.477616809-05:00","close_reason":"Closed via update"}
{"id":"nb-bk3","title":"Handle unclosed if/endif blocks with proper error","description":"Detect and report error for {% if condition %} without matching {% endif %}","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T23:54:22.948433639-05:00","updated_at":"2025-11-11T23:10:02.222415258-05:00","closed_at":"2025-11-11T23:10:02.222415258-05:00","close_reason":"Closed via update","dependencies":[{"issue_id":"nb-bk3","depends_on_id":"nb-e94","type":"blocks","created_at":"2025-11-09T23:54:22.950300764-05:00","created_by":"daemon"}]}
{"id":"nb-bzc","title":"Implement filter pipeline missing required arguments error (test_filter_pipeline_missing_required_arguments)","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T23:55:12.278741593-05:00","updated_at":"2025-11-12T22:57:54.387467135-05:00","closed_at":"2025-11-12T22:57:54.387467135-05:00","close_reason":"Completed filter pipeline missing required arguments error implementation"}
{"id":"nb-c3p","title":"Implement preforked process pool with least connection load balancing","description":"Transform the single-threaded server into a concurrent architecture using preforked worker processes with least connection load balancing. This involves adding a --workers command line option, implementing worker process management, file descriptor passing via UNIX sockets, bidirectional communication for connection completion tracking, and the least connection algorithm.","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-01T12:22:34.132341243-05:00","updated_at":"2026-01-01T12:22:34.132341243-05:00","labels":["concurrency","load-balancing","performance","process-management"],"dependencies":[{"issue_id":"nb-c3p","depends_on_id":"nb-qww","type":"blocks","created_at":"2026-01-01T12:22:37.915872742-05:00","created_by":"daemon"},{"issue_id":"nb-c3p","depends_on_id":"nb-eax","type":"blocks","created_at":"2026-01-01T12:22:41.827180526-05:00","created_by":"daemon"},{"issue_id":"nb-c3p","depends_on_id":"nb-ar3","type":"blocks","created_at":"2026-01-01T12:22:44.758244764-05:00","created_by":"daemon"},{"issue_id":"nb-c3p","depends_on_id":"nb-i1c","type":"blocks","created_at":"2026-01-01T12:22:47.497095443-05:00","created_by":"daemon"},{"issue_id":"nb-c3p","depends_on_id":"nb-59h","type":"blocks","created_at":"2026-01-01T12:22:54.51364415-05:00","created_by":"daemon"},{"issue_id":"nb-c3p","depends_on_id":"nb-x43","type":"blocks","created_at":"2026-01-01T12:22:58.197246067-05:00","created_by":"daemon"},{"issue_id":"nb-c3p","depends_on_id":"nb-1rj","type":"blocks","created_at":"2026-01-01T12:23:01.688235209-05:00","created_by":"daemon"},{"issue_id":"nb-c3p","depends_on_id":"nb-mtp","type":"blocks","created_at":"2026-01-01T12:23:04.752975188-05:00","created_by":"daemon"}]}
{"id":"nb-cuw","title":"Generate optimized Lua functions for all features","description":"Optimize template compilation to generate efficient Lua functions with minimal overhead for all template features.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T23:23:42.271988848-05:00","updated_at":"2025-12-18T01:06:05.983300823-05:00","closed_at":"2025-12-18T01:06:05.983300823-05:00","close_reason":"Cancelled - not needed at this time","dependencies":[{"issue_id":"nb-cuw","depends_on_id":"nb-8vk","type":"blocks","created_at":"2025-11-09T23:23:42.274038496-05:00","created_by":"daemon"}]}
{"id":"nb-cvs","title":"Implement test_multiple_blocks - multiple blocks in same template","description":"Implement test case for templates with multiple {% block %} directives that can be selectively overridden.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-14T23:26:03.656839316-05:00","updated_at":"2025-11-14T23:55:46.126760328-05:00","closed_at":"2025-11-14T23:55:46.126760328-05:00","close_reason":"Formatting issues fixed by user"}
{"id":"nb-cx4","title":"Implement filter registration duplicate name error (test_filter_registration_duplicate_name)","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T23:55:12.305491674-05:00","updated_at":"2025-11-12T22:57:55.390991421-05:00","closed_at":"2025-11-12T22:57:55.390991421-05:00","close_reason":"Completed filter registration duplicate name error implementation"}
{"id":"nb-d00","title":"Design template directory loading with dependency analysis","description":"Design directory-based template loading system with automatic dependency resolution. Key decisions: single templates directory, no relative extends paths, auto-register all files by relative path, separate API from Template.register().","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-14T23:16:48.44399639-05:00","updated_at":"2025-11-14T23:16:57.423411502-05:00","closed_at":"2025-11-14T23:16:57.423411502-05:00","close_reason":"Design decisions recorded and approved by user"}
{"id":"nb-d41","title":"Implement partial config loading with defaults merging","description":"Implement Config.load() to properly merge partial configs with defaults. This covers the test_load_partial_config test case (though the test currently has a TODO noting the limitation).","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-17T23:20:00.993765016-05:00","updated_at":"2025-11-17T23:34:35.862927181-05:00","closed_at":"2025-11-17T23:34:35.862927181-05:00","close_reason":"Closed via update"}
{"id":"nb-dgw","title":"Complete component-based template engine","description":"Finish the template engine with component-based architecture optimized for AI development. Focus on predictable structure, minimal syntax, and composable components.","design":"Template Engine Implementation Plan:\n\nCORE FEATURES TO IMPLEMENT:\n1. Component Registration API - template.component(name, template_string)\n2. Template Compilation - Convert templates to Lua functions\n3. Component Inlining - Merge components into parent templates\n4. Expression Parsing - Math, strings, safe navigation (?.)\n5. Control Flow - {% if/endif %}, {% for/endfor %}\n6. Filters - Pipeline operator |\u003e with function calls\n7. Comments - {-- comments --}\n8. Advanced Variables - Dynamic property access user[key]\n9. Whitespace Control - {{- -}} trimming\n10. Template Inheritance - {% extends %}, {% block %}\n\nARCHITECTURE:\n- Parser: Tokenize and parse template syntax\n- Compiler: Generate optimized Lua functions\n- Registry: Store component definitions\n- Validation: Compile-time error checking\n- Environment: Safe execution context\n\nTESTING REQUIREMENTS:\n- 100% statement coverage\n- Unit tests for all features\n- Integration tests for compilation\n- Performance benchmarks\n- Mock unsafe operations\n\nDEPENDENCIES:\n- Blocks on completed design (✅ nb-7ld)\n- Requires luatest for testing\n- Uses existing tokenizer foundation\n\nCURRENT CODEBASE STATE:\n- lua/nibiru/template.lua: Basic variable interpolation, compilation to functions\n- lua/nibiru/tokenizer.lua: Tokenizes {{ }}, {% %}, and text\n- Missing: Component system, expressions, control flow, filters, etc.\n\nIMPLEMENTATION PHASES:\nPhase 1: Core Infrastructure\n- Extend tokenizer for new syntax (expressions, filters, comments, etc.)\n- Build expression parser (math, strings, safe navigation)\n- Create component registry system\n- Implement basic component inlining\n\nPhase 2: Control Flow \u0026 Advanced Features\n- Add {% if/endif %} and {% for/endfor %} parsing\n- Implement template inheritance ({% extends %}, {% block %})\n- Add whitespace control parsing\n- Implement filter pipeline parsing\n\nPhase 3: Compilation \u0026 Optimization\n- Generate optimized Lua functions for all features\n- Implement compile-time validation and error checking\n- Add performance optimizations\n- Ensure safe execution environment\n\nPhase 4: Testing \u0026 Documentation\n- 100% test coverage with luatest\n- Performance benchmarks\n- User documentation in docs/\n- Developer documentation with EmmyLua annotations\n\nFILES TO MODIFY:\n- lua/nibiru/template.lua (main engine)\n- lua/nibiru/tokenizer.lua (extend for new syntax)\n- tests/test_template.lua (comprehensive test suite)\n\nQUALITY REQUIREMENTS (from AGENTS.md):\n- 100% statement coverage\n- Tests for all code changes\n- Linting with Lua LSP\n- Formatting with stylua\n- Performance benchmarks\n- Comprehensive error messages","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-09T21:37:02.819869536-05:00","updated_at":"2025-12-18T01:07:38.096628246-05:00","closed_at":"2025-12-18T01:07:38.096628246-05:00","close_reason":"Cancelled - not needed at this time","dependencies":[{"issue_id":"nb-dgw","depends_on_id":"nb-7ld","type":"blocks","created_at":"2025-11-08T22:48:49.841237276-05:00","created_by":"daemon"},{"issue_id":"nb-dgw","depends_on_id":"nb-vum","type":"blocks","created_at":"2025-11-11T23:14:14.880966152-05:00","created_by":"daemon"},{"issue_id":"nb-dgw","depends_on_id":"nb-8vk","type":"blocks","created_at":"2025-11-11T23:14:19.162681435-05:00","created_by":"daemon"},{"issue_id":"nb-dgw","depends_on_id":"nb-e06","type":"blocks","created_at":"2025-11-11T23:14:22.207683443-05:00","created_by":"daemon"}]}
{"id":"nb-doe","title":"Support nested for loops","description":"Allow {% for %} loops to be nested inside each other","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T18:51:38.172217491-05:00","updated_at":"2025-11-11T22:28:33.423168717-05:00","closed_at":"2025-11-11T22:28:33.423168717-05:00","close_reason":"Closed via update"}
{"id":"nb-dpq","title":"Implement filter pipeline invalid syntax incomplete chain error (test_filter_pipeline_invalid_syntax_incomplete_chain)","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T23:55:08.107249431-05:00","updated_at":"2025-11-12T22:57:51.083864286-05:00","closed_at":"2025-11-12T22:57:51.083864286-05:00","close_reason":"Completed filter pipeline invalid syntax incomplete chain error implementation"}
{"id":"nb-dzg","title":"Implement YAML frontmatter parser module","description":"Create a separate YAML parser module that can parse YAML frontmatter strings (with --- delimiters) into Lua tables. Should handle primitive YAML types: strings, numbers, booleans, arrays, and nested objects.","status":"closed","priority":2,"issue_type":"task","assignee":"matt","created_at":"2025-12-06T17:21:39.340310259-05:00","updated_at":"2025-12-06T17:39:45.20007579-05:00","closed_at":"2025-12-06T17:39:45.20007579-05:00","close_reason":"Closed via update"}
{"id":"nb-e06","title":"Phase 4: Testing \u0026 Documentation","description":"Complete testing coverage, performance benchmarks, and comprehensive documentation.","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-11-09T23:22:50.271378376-05:00","updated_at":"2025-12-18T01:08:01.785901763-05:00","closed_at":"2025-12-18T01:08:01.785901763-05:00","close_reason":"Cancelled - not needed at this time"}
{"id":"nb-e8m","title":"Implement basic filter pipeline (test_filter_pipeline_basic)","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T23:54:55.885355061-05:00","updated_at":"2025-11-12T22:57:37.268535615-05:00","closed_at":"2025-11-12T22:57:37.268535615-05:00","close_reason":"Completed basic filter pipeline implementation"}
{"id":"nb-e8y","title":"Add subcommands to nibiru executable for introspection and serving","description":"Implement subcommand structure for the nibiru CLI tool. Add commands like `nibiru config` to show current configuration and `nibiru run`/`nibiru serve` for application serving. This will provide better introspection capabilities and organize the CLI interface.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-17T22:47:18.856807061-05:00","updated_at":"2026-01-01T10:36:19.480199907-05:00","closed_at":"2026-01-01T10:36:19.480199907-05:00","close_reason":"Implemented subcommand structure for nibiru CLI. Added 'run' subcommand for serving applications, with proper argument parsing and usage messages."}
{"id":"nb-e94","title":"Implement {% if/endif %} control flow parsing","description":"Add support for conditional rendering with {% if condition %}...{% endif %} syntax in templates.","notes":"Blocked by 20 child issues covering all if/endif functionality. Each test case is now a separate task for focused implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T23:22:43.822833916-05:00","updated_at":"2025-11-11T23:09:56.907850188-05:00","closed_at":"2025-11-11T23:09:56.907850188-05:00","close_reason":"Closed via update","dependencies":[{"issue_id":"nb-e94","depends_on_id":"nb-vum","type":"blocks","created_at":"2025-11-09T23:22:43.824689629-05:00","created_by":"daemon"}]}
{"id":"nb-ea8","title":"Implement if/endif with default value expressions","description":"Support {% if user.name or \"Guest\" == \"Alice\" %} with or operator for defaults","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T23:54:06.777996572-05:00","updated_at":"2025-11-10T00:09:28.025011601-05:00","closed_at":"2025-11-10T00:09:28.025011601-05:00","close_reason":"Completed if/endif with default value expressions - supports user.name or \"Guest\" == \"Alice\" syntax","dependencies":[{"issue_id":"nb-ea8","depends_on_id":"nb-e94","type":"blocks","created_at":"2025-11-09T23:54:06.779901368-05:00","created_by":"daemon"}]}
{"id":"nb-eax","title":"Add --workers command line option with validation","description":"Add --workers N command line option to nibiru run command. Include validation to ensure N \u003e 0, with default value of 2. Update argument parsing logic in main.c to handle the new option.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-01T12:22:40.484659973-05:00","updated_at":"2026-01-01T12:55:21.064295105-05:00","closed_at":"2026-01-01T12:55:21.064295105-05:00","close_reason":"Closed via update","labels":["argument-parsing","cli","command-line"]}
{"id":"nb-ehu","title":"Implement if/endif with equality expressions","description":"Support {% if user.name == \"Alice\" %}Welcome Alice{% endif %}","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T23:54:01.983073348-05:00","updated_at":"2025-11-10T00:05:55.687765132-05:00","closed_at":"2025-11-10T00:05:55.687765132-05:00","close_reason":"Completed if/endif with equality expressions - supports user.name == \"Alice\" syntax","dependencies":[{"issue_id":"nb-ehu","depends_on_id":"nb-e94","type":"blocks","created_at":"2025-11-09T23:54:01.985015785-05:00","created_by":"daemon"}]}
{"id":"nb-eoy","title":"Implement test_block_name_mismatch - child defining new blocks","description":"Implement test case for child templates defining blocks that don't exist in parent (should work).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-14T23:26:31.973844189-05:00","updated_at":"2025-11-14T23:47:45.696981812-05:00","closed_at":"2025-11-14T23:47:45.696981812-05:00","close_reason":"Test implemented and passing"}
{"id":"nb-eqx","title":"Implement filter pipeline chaining (test_filter_pipeline_chaining)","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T23:55:00.221241422-05:00","updated_at":"2025-11-12T22:57:38.521512467-05:00","closed_at":"2025-11-12T22:57:38.521512467-05:00","close_reason":"Completed filter pipeline chaining implementation"}
{"id":"nb-etv","title":"Implement filter pipeline with arguments (test_filter_pipeline_with_arguments)","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T23:55:00.246224143-05:00","updated_at":"2025-11-12T22:57:39.706963263-05:00","closed_at":"2025-11-12T22:57:39.706963263-05:00","close_reason":"Completed filter pipeline with arguments implementation"}
{"id":"nb-f67","title":"Support for loops with expressions and conditionals","description":"Allow {% if %} conditionals inside {% for %} loops","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T18:51:39.150401103-05:00","updated_at":"2025-11-11T22:33:40.849056612-05:00","closed_at":"2025-11-11T22:33:40.849056612-05:00","close_reason":"Closed via update"}
{"id":"nb-gtk","title":"Implement test_nested_block_content - complex content in blocks","description":"Implement test case for blocks containing complex content: variables, control flow, loops, and other template features.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-14T23:26:07.576405409-05:00","updated_at":"2025-11-15T00:05:09.770166908-05:00","closed_at":"2025-11-15T00:05:09.770166908-05:00","close_reason":"Fixed IF_START token handling and whitespace issues"}
{"id":"nb-gvi","title":"Add error handling for nonexistent directories","description":"Implement proper error handling in TemplateLoader.from_directory() when the specified directory does not exist. Should throw a clear error message indicating the directory was not found.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-16T15:35:47.43679904-05:00","updated_at":"2025-11-16T15:39:14.768826879-05:00","closed_at":"2025-11-16T15:39:14.768826879-05:00","close_reason":"Error handling for nonexistent directories implemented in TemplateLoader.from_directory()","dependencies":[{"issue_id":"nb-gvi","depends_on_id":"nb-94b","type":"blocks","created_at":"2025-11-16T15:35:59.084470646-05:00","created_by":"daemon"}]}
{"id":"nb-h22","title":"Implement key-value pair iteration with pairs()","description":"Support {% for key, value in pairs(data) %} syntax for table iteration","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T18:51:36.208960361-05:00","updated_at":"2025-11-11T22:09:02.756897955-05:00","closed_at":"2025-11-11T22:09:02.756897955-05:00","close_reason":"Closed via update"}
{"id":"nb-hpl","title":"Implement test_blocks_with_components - blocks containing components","description":"Implement test case for blocks that contain component usage and ensure components work within inherited templates.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-14T23:26:12.271979709-05:00","updated_at":"2025-11-14T23:55:46.266054764-05:00","closed_at":"2025-11-14T23:55:46.266054764-05:00","close_reason":"Formatting issues fixed by user"}
{"id":"nb-i1c","title":"Implement file descriptor passing via UNIX sockets","description":"Implement sendmsg()/recvmsg() with SCM_RIGHTS to pass accepted client socket file descriptors from parent to worker processes via UNIX domain sockets. Handle the control message structure properly.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-01T12:22:46.25386336-05:00","updated_at":"2026-01-01T13:37:22.010306695-05:00","closed_at":"2026-01-01T13:37:22.010306695-05:00","close_reason":"Closed via update","labels":["fd-passing","ipc","unix-sockets"]}
{"id":"nb-ib4","title":"Design AI-optimized Lua web framework architecture","description":"Design the overall architecture for an AI-optimized Lua web framework, focusing on components that make development easy for AI systems. Cover core architecture, data handling, security, and development tools.","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-11-09T21:37:02.822019073-05:00","updated_at":"2025-12-18T01:08:37.269312991-05:00","closed_at":"2025-12-18T01:08:37.269312991-05:00","close_reason":"Cancelled - too broad"}
{"id":"nb-ihv","title":"Implement test_missing_parent_template - error for non-existent parent","description":"Implement test case for proper error handling when {% extends %} references a template that doesn't exist.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-14T23:26:16.029741342-05:00","updated_at":"2025-11-14T23:47:45.265102725-05:00","closed_at":"2025-11-14T23:47:45.265102725-05:00","close_reason":"Test implemented and passing"}
{"id":"nb-iw9","title":"Implement filter pipeline multiple arguments (test_filter_pipeline_multiple_arguments)","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T23:55:00.270081312-05:00","updated_at":"2025-11-12T22:57:40.912555062-05:00","closed_at":"2025-11-12T22:57:40.912555062-05:00","close_reason":"Completed filter pipeline multiple arguments implementation"}
{"id":"nb-j13","title":"Handle orphaned endif without matching if","description":"Detect and report error for {% endif %} without matching {% if %}","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T23:54:27.995513751-05:00","updated_at":"2025-11-11T23:10:03.462124114-05:00","closed_at":"2025-11-11T23:10:03.462124114-05:00","close_reason":"Closed via update","dependencies":[{"issue_id":"nb-j13","depends_on_id":"nb-e94","type":"blocks","created_at":"2025-11-09T23:54:27.997382889-05:00","created_by":"daemon"}]}
{"id":"nb-jaz","title":"Implement filter pipeline in component (test_filter_pipeline_in_component)","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T23:55:08.029776629-05:00","updated_at":"2025-11-12T22:57:47.544626823-05:00","closed_at":"2025-11-12T22:57:47.544626823-05:00","close_reason":"Completed filter pipeline in component implementation"}
{"id":"nb-jtm","title":"Design directory scanning and file discovery API","description":"Design and implement API for recursively scanning template directories to discover .html files. Handle file filtering, path normalization, and error cases for inaccessible directories.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-15T00:21:27.562709643-05:00","updated_at":"2025-11-15T23:34:03.325518084-05:00","closed_at":"2025-11-15T23:34:03.325518084-05:00","close_reason":"Directory scanning API implemented with path.files_from() - recursively scans directories, handles errors, returns relative paths","dependencies":[{"issue_id":"nb-jtm","depends_on_id":"nb-3os","type":"blocks","created_at":"2025-11-15T00:21:27.567436215-05:00","created_by":"daemon"}]}
{"id":"nb-l7z","title":"Implement nested if/endif blocks (both conditions true)","description":"Support nested {% if %} blocks where both outer and inner conditions are true","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T23:54:18.369369591-05:00","updated_at":"2025-11-11T18:13:20.495108431-05:00","closed_at":"2025-11-11T18:13:20.495108431-05:00","close_reason":"Nested if/endif blocks with both conditions true working correctly - test updated to account for proper whitespace handling","dependencies":[{"issue_id":"nb-l7z","depends_on_id":"nb-e94","type":"blocks","created_at":"2025-11-09T23:54:18.371033733-05:00","created_by":"daemon"}]}
{"id":"nb-ldg","title":"Create independent Lua framework library with FFI bindings","description":"Design and implement a standalone Lua library (nibiru.so/.dll) that provides core framework functionality including template engine, directory operations, and utilities. Use Lua FFI or C API to create bindings that work independently of the web server main.c. Enable running framework code and tests without the web server.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-15T00:29:05.796836037-05:00","updated_at":"2025-11-15T23:31:32.053517575-05:00","closed_at":"2025-11-15T23:31:32.053517575-05:00","close_reason":"Library is already correctly building as nibiru_core.so with FFI bindings"}
{"id":"nb-lgo","title":"Implement config defaults handling when no config file exists","description":"Implement Config.load() to return sensible defaults when config.lua doesn't exist. This covers the test_load_defaults_when_no_file test case.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-17T23:19:52.595444766-05:00","updated_at":"2025-11-17T23:29:04.85540783-05:00","closed_at":"2025-11-17T23:29:04.85540783-05:00","close_reason":"Implemented Config.load() to return Config.defaults() when config.lua file doesn't exist, providing sensible fallback behavior"}
{"id":"nb-lr5","title":"Implement test_circular_dependency - detect circular inheritance","description":"Implement test case for detecting and handling circular template inheritance dependencies.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-14T23:26:19.771578751-05:00","updated_at":"2025-11-15T00:08:55.088069721-05:00","closed_at":"2025-11-15T00:08:55.088069721-05:00","close_reason":"Implemented circular dependency detection with test"}
{"id":"nb-mfb","title":"Implement basic directory loading functionality","description":"Implement the core TemplateLoader.from_directory() function that loads multiple templates from a flat directory structure. Should register templates with correct names and allow them to be extended and rendered.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-16T15:35:44.761446344-05:00","updated_at":"2025-11-16T15:36:45.302843088-05:00","closed_at":"2025-11-16T15:36:45.302843088-05:00","close_reason":"Implemented TemplateLoader.from_directory() with basic directory loading functionality - all tests pass","dependencies":[{"issue_id":"nb-mfb","depends_on_id":"nb-94b","type":"blocks","created_at":"2025-11-16T15:35:44.764706911-05:00","created_by":"daemon"}]}
{"id":"nb-mpo","title":"Implement last filter","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T23:38:40.093859224-05:00","updated_at":"2025-11-12T23:36:57.608476008-05:00","closed_at":"2025-11-12T23:36:57.608476008-05:00","close_reason":"Completed last filter implementation with comprehensive tests"}
{"id":"nb-mtp","title":"Implement signal handling and graceful shutdown","description":"Add proper signal handling (SIGTERM, SIGINT) for graceful shutdown. Parent should signal all workers to exit and wait for them. Workers should close sockets and cleanup Lua states properly.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-01T12:23:03.524849636-05:00","updated_at":"2026-01-01T12:23:03.524849636-05:00","labels":["cleanup","graceful-shutdown","signal-handling"]}
{"id":"nb-mze","title":"Implement {% for/endfor %} loop parsing","description":"Add support for iteration with {% for item in items %}...{% endfor %} syntax in templates.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T23:22:44.965648591-05:00","updated_at":"2025-11-11T23:09:58.40685137-05:00","closed_at":"2025-11-11T23:09:58.40685137-05:00","close_reason":"Closed via update","dependencies":[{"issue_id":"nb-mze","depends_on_id":"nb-vum","type":"blocks","created_at":"2025-11-09T23:22:44.967148643-05:00","created_by":"daemon"}]}
{"id":"nb-n2n","title":"Handle empty for loop syntax","description":"Detect and report error for {% for %} (completely empty for statement)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T18:51:49.786405227-05:00","updated_at":"2025-11-11T22:43:05.524473766-05:00","closed_at":"2025-11-11T22:43:05.524473766-05:00","close_reason":"Closed via update"}
{"id":"nb-n6m","title":"Implement config.load() function for valid config files","description":"Implement the Config.load() function to handle loading and parsing valid config.lua files. This covers the test_load_valid_config test case.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-17T23:19:40.674978346-05:00","updated_at":"2025-11-17T23:23:53.954683538-05:00","closed_at":"2025-11-17T23:23:53.954683538-05:00","close_reason":"Implemented Config.load() function that loads and parses valid config.lua files, with proper error handling for invalid Lua syntax and non-table returns"}
{"id":"nb-nrl","title":"Improve tokenizer with attribute validation and error handling","description":"Enhanced tokenizer with attribute validation and error detection. Added validate_unquoted_attribute function and malformed attribute detection. Added comprehensive tokenizer tests for component parsing.","design":"Add attribute validation function in tokenizer.lua that checks unquoted attribute values for invalid characters (\u003e \" ' { }). Create special error tokens (MALFORMED_ATTRIBUTE) for invalid syntax. Improve error recovery logic to properly consume tokens when malformed syntax is encountered.","acceptance_criteria":"Tokenizer correctly identifies malformed attributes and generates appropriate error tokens. Parser handles malformed attribute tokens gracefully without cascading errors. Tests pass for malformed attribute detection.","notes":"Completed: Added attribute validation function, malformed attribute detection, comprehensive component tokenizer tests. Next: Implement special error tokens and improve parser error recovery.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-09T22:05:49.518258159-05:00","updated_at":"2025-11-09T22:13:19.889210381-05:00","closed_at":"2025-11-09T22:13:19.889210381-05:00","close_reason":"Closed via update"}
{"id":"nb-obm","title":"Implement falsy value handling (false, nil, 0, empty string, empty table)","description":"Ensure {% if value %} treats false, nil, 0, '', {} as falsy","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T23:53:58.706267062-05:00","updated_at":"2025-11-10T00:03:35.451439269-05:00","closed_at":"2025-11-10T00:03:35.451439269-05:00","close_reason":"Completed falsy value handling - false, nil, 0, empty string, and empty tables all render nothing","dependencies":[{"issue_id":"nb-obm","depends_on_id":"nb-e94","type":"blocks","created_at":"2025-11-09T23:53:58.707703696-05:00","created_by":"daemon"}]}
{"id":"nb-ot8","title":"Implement if/endif with string concatenation","description":"Support {% if greeting .. name == \"HelloWorld\" %} with string operations","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T23:54:13.248195122-05:00","updated_at":"2025-11-10T00:11:28.221617578-05:00","closed_at":"2025-11-10T00:11:28.221617578-05:00","close_reason":"Completed if/endif with string concatenation - supports greeting .. name == \"HelloWorld\" syntax","dependencies":[{"issue_id":"nb-ot8","depends_on_id":"nb-e94","type":"blocks","created_at":"2025-11-09T23:54:13.250012483-05:00","created_by":"daemon"}]}
{"id":"nb-pb7","title":"Implement nested directory structure support","description":"Add support for loading templates from nested directory structures. Should register templates with proper relative paths like 'pages/index.html' and 'partials/footer.html' and allow them to be extended correctly.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-16T15:35:50.42833182-05:00","updated_at":"2025-11-16T15:39:16.039030367-05:00","closed_at":"2025-11-16T15:39:16.039030367-05:00","close_reason":"Nested directory structure support implemented - templates registered with proper relative paths","dependencies":[{"issue_id":"nb-pb7","depends_on_id":"nb-94b","type":"blocks","created_at":"2025-11-16T15:36:00.285280883-05:00","created_by":"daemon"}]}
{"id":"nb-pwj","title":"Implement test_multiple_extends - error for multiple extends directives","description":"Implement test case for proper error handling when a template has multiple {% extends %} directives.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-14T23:26:40.813869512-05:00","updated_at":"2025-11-14T23:47:45.939749743-05:00","closed_at":"2025-11-14T23:47:45.939749743-05:00","close_reason":"Test implemented and passing"}
{"id":"nb-py7","title":"Complete component-based template engine","description":"Finish the template engine with component-based architecture optimized for AI development. Focus on predictable structure, minimal syntax, and composable components.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-08T22:46:43.920063789-05:00","updated_at":"2025-11-09T15:42:13.405718008-05:00","closed_at":"2025-11-09T15:42:13.405718008-05:00"}
{"id":"nb-qjv","title":"Implement Config.defaults() function","description":"Implement the Config.defaults() function to return the default configuration structure. This covers the test_defaults_function test case.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-17T23:19:53.89490932-05:00","updated_at":"2025-11-17T23:21:53.352872501-05:00","closed_at":"2025-11-17T23:21:53.352872501-05:00","close_reason":"Implemented Config.defaults() function that returns the default configuration structure with templates.directory = \"templates\""}
{"id":"nb-qs7","title":"Fix template inheritance merging bug with BLOCK_START tokens","description":"Template inheritance merging fails to properly replace block statements with merged content, leaving BLOCK_START tokens in the final token stream that cause parsing errors. This affects multi-level inheritance chains where base templates contain blocks.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-11-16T23:32:41.829147699-05:00","updated_at":"2025-11-16T23:38:21.233054823-05:00","closed_at":"2025-11-16T23:38:21.233054823-05:00","close_reason":"Closed via update","labels":["block-parsing","inheritance","template-merging"]}
{"id":"nb-qww","title":"Establish performance baseline with hey load testing","description":"Run comprehensive load tests with the current single-threaded implementation using hey to establish performance baseline metrics. Test with various concurrency levels (1, 10, 50, 100) and document requests/second, latency percentiles, and error rates for comparison after implementation.","notes":"Completed baseline performance testing with hey. Found that 1 concurrent request test shows ~2.8k RPS (hey limitation), while 5 concurrent requests achieve 21k RPS. Higher concurrency tests show 40k+ RPS peak. Results documented in docs/performance.md with analysis of hey's behavior.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-01T12:22:36.386445206-05:00","updated_at":"2026-01-01T12:40:26.891182206-05:00","closed_at":"2026-01-01T12:37:55.957636556-05:00","close_reason":"Closed via update","labels":["baseline","load-testing","performance"]}
{"id":"nb-r7v","title":"Implement basic if/endif with false condition","description":"Support {% if show %}Hello World{% endif %} when condition is false (renders nothing)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T23:53:56.962933776-05:00","updated_at":"2025-11-10T00:03:34.278838752-05:00","closed_at":"2025-11-10T00:03:34.278838752-05:00","close_reason":"Completed basic if/endif with false condition - renders nothing when condition is false","dependencies":[{"issue_id":"nb-r7v","depends_on_id":"nb-e94","type":"blocks","created_at":"2025-11-09T23:53:56.964671878-05:00","created_by":"daemon"}]}
{"id":"nb-rsa","title":"Implement configuration system for nibiru framework","description":"Create a configuration module that allows users to configure framework settings like template directory, server options, and other runtime behavior. The config should be loaded explicitly and passed through the application initialization chain.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-17T22:05:25.342473597-05:00","updated_at":"2025-11-17T23:34:43.962857553-05:00","closed_at":"2025-11-17T23:34:43.962857553-05:00","close_reason":"Closed via update"}
{"id":"nb-s0d","title":"Implement test_extends_after_content - error for extends not at start","description":"Implement test case for proper error handling when {% extends %} appears after other content in a template.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-14T23:26:44.893190175-05:00","updated_at":"2025-11-14T23:47:46.076739162-05:00","closed_at":"2025-11-14T23:47:46.076739162-05:00","close_reason":"Test implemented and passing"}
{"id":"nb-s1n","title":"Implement whitespace control parsing ({{- -}})","description":"Add whitespace trimming support with {{- expression -}} syntax to control whitespace around template expressions.","design":"1. Tokenizer Extension: Modify tokenizer to recognize `{{-` and `-}}` as whitespace-trimming variants of `{{` and `}}`\\n2. Token Type Addition: Add `EXPR_START_TRIM` and `EXPR_END_TRIM` token types\\n3. Template Compiler Update: Modify compilation logic to trim whitespace around expressions when these tokens are encountered\\n4. Test Addition: Create comprehensive tests for whitespace control behavior\\n5. Documentation Update: Add whitespace control examples to `docs/templates.md`","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T23:22:47.197128511-05:00","updated_at":"2025-12-18T01:04:42.606930515-05:00","closed_at":"2025-12-18T01:04:42.606930515-05:00","close_reason":"Cancelled - not needed at this time"}
{"id":"nb-sge","title":"Implement proper variable scoping in for loops","description":"Ensure loop variables don't leak outside the loop scope","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T18:51:41.037747309-05:00","updated_at":"2025-11-11T22:28:35.584503388-05:00","closed_at":"2025-11-11T22:28:35.584503388-05:00","close_reason":"Closed via update"}
{"id":"nb-t7c","title":"Establish implementation rules and expectations","description":"Define clear rules for user docs, developer docs, testing, linting, formatting, and issue cleanup to ensure consistent high-quality implementation.","design":"Implementation rules - Issue Cleanup:\\n- Regular cleanup: review completed issues weekly ✅\\n- Status accuracy: keep current ✅\\n- Description updates: as understanding evolves ✅\\n- Duplicate removal: merge/close duplicates ✅\\n- Dependency management: keep accurate ✅\\n- Archive old issues: only with user confirmation ❌ (changed from automatic)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T10:26:30.404152617-05:00","updated_at":"2025-11-09T15:42:12.724880189-05:00","closed_at":"2025-11-09T15:42:12.724880189-05:00","close_reason":"Implementation rules established and added to AGENTS.md"}
{"id":"nb-t8n","title":"Implement if/endif with arithmetic expressions","description":"Support {% if x + y \u003e 10 %} with mathematical operations in conditions","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T23:54:08.528857474-05:00","updated_at":"2025-11-10T00:10:36.932715293-05:00","closed_at":"2025-11-10T00:10:36.932715293-05:00","close_reason":"Completed if/endif with arithmetic expressions - supports x + y \u003e 10 syntax","dependencies":[{"issue_id":"nb-t8n","depends_on_id":"nb-e94","type":"blocks","created_at":"2025-11-09T23:54:08.530248864-05:00","created_by":"daemon"}]}
{"id":"nb-tmp","title":"Implement truncate filter","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T23:38:40.016316464-05:00","updated_at":"2025-11-12T23:31:29.65051685-05:00","closed_at":"2025-11-12T23:31:29.65051685-05:00","close_reason":"Completed truncate filter implementation with comprehensive tests"}
{"id":"nb-tnq","title":"Handle malformed for loop syntax - missing expression","description":"Detect and report error for {% for item in %} (missing collection expression)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T18:51:49.000085425-05:00","updated_at":"2025-11-11T22:41:44.975088419-05:00","closed_at":"2025-11-11T22:41:44.975088419-05:00","close_reason":"Closed via update"}
{"id":"nb-udh","title":"Validate performance improvements with hey load testing","description":"Run the same hey load tests as baseline against the new concurrent implementation. Compare requests/second, latency percentiles, and error rates. Verify that least connection balancing provides better load distribution than round-robin.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-01T12:23:06.392567935-05:00","updated_at":"2026-01-01T12:23:06.392567935-05:00","labels":["load-testing","performance-validation","verification"],"dependencies":[{"issue_id":"nb-udh","depends_on_id":"nb-c3p","type":"blocks","created_at":"2026-01-01T12:23:07.985744035-05:00","created_by":"daemon"}]}
{"id":"nb-vum","title":"Phase 2: Control Flow \u0026 Advanced Features","description":"Implement control flow statements and advanced template features for the component-based template engine.","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-11-09T23:22:41.580730552-05:00","updated_at":"2025-11-30T18:43:23.325664313-05:00","closed_at":"2025-11-30T18:43:23.325664313-05:00","close_reason":"Control flow statements implemented - advanced features handled by component engine","dependencies":[{"issue_id":"nb-vum","depends_on_id":"nb-69m","type":"blocks","created_at":"2025-11-12T23:46:21.500961118-05:00","created_by":"daemon"}]}
{"id":"nb-w6j","title":"Add C-level directory traversal functions","description":"Add C functions to main.c for directory traversal since Lua standard library lacks this. Provide Lua bindings for scandir-style functionality to walk template directories.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-15T00:21:27.832935113-05:00","updated_at":"2025-11-15T23:34:06.240392047-05:00","closed_at":"2025-11-15T23:34:06.240392047-05:00","close_reason":"C-level directory traversal implemented in src/libnibiru.c as shared library with Lua bindings","dependencies":[{"issue_id":"nb-w6j","depends_on_id":"nb-3os","type":"blocks","created_at":"2025-11-15T00:21:27.837290517-05:00","created_by":"daemon"},{"issue_id":"nb-w6j","depends_on_id":"nb-1q0","type":"blocks","created_at":"2025-11-15T00:29:05.964606684-05:00","created_by":"daemon"}]}
{"id":"nb-w8o","title":"Add error handling for unreadable template files","description":"Implement proper error handling when template files cannot be read (permission issues, etc.). Should throw clear error messages indicating which file failed to read and why.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-16T15:35:52.887170678-05:00","updated_at":"2025-11-16T15:39:18.428496329-05:00","closed_at":"2025-11-16T15:39:18.428496329-05:00","close_reason":"Error handling for unreadable template files implemented with clear error messages","dependencies":[{"issue_id":"nb-w8o","depends_on_id":"nb-94b","type":"blocks","created_at":"2025-11-16T15:36:02.308453096-05:00","created_by":"daemon"}]}
{"id":"nb-wj8","title":"Implement filter pipeline variable arguments (test_filter_pipeline_variable_arguments)","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T23:55:00.317153493-05:00","updated_at":"2025-11-12T22:57:44.090809785-05:00","closed_at":"2025-11-12T22:57:44.090809785-05:00","close_reason":"Completed filter pipeline variable arguments implementation"}
{"id":"nb-ww0","title":"Handle invalid syntax in if conditions","description":"Detect and report error for malformed expressions like {% if user.name == %}","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T23:54:30.753181034-05:00","updated_at":"2025-11-11T18:26:41.71508378-05:00","closed_at":"2025-11-11T18:26:41.71508378-05:00","close_reason":"Invalid syntax in if conditions now properly detected and reported with clear error messages during compilation","dependencies":[{"issue_id":"nb-ww0","depends_on_id":"nb-e94","type":"blocks","created_at":"2025-11-09T23:54:30.754959642-05:00","created_by":"daemon"}]}
{"id":"nb-wzu","title":"Create performance benchmarks","description":"Develop comprehensive performance benchmarks to measure template compilation and rendering speed across different scenarios.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T23:23:48.60698819-05:00","updated_at":"2025-12-18T01:04:42.230010194-05:00","closed_at":"2025-12-18T01:04:42.230010194-05:00","close_reason":"Cancelled - not needed at this time","dependencies":[{"issue_id":"nb-wzu","depends_on_id":"nb-e06","type":"blocks","created_at":"2025-11-09T23:23:48.608234151-05:00","created_by":"daemon"}]}
{"id":"nb-x43","title":"Implement bidirectional communication protocol","description":"Implement the communication protocol where workers send completion notifications ('D' byte) back to parent via UNIX sockets. Parent should handle these notifications in its main loop to track when connections finish.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-01T12:22:55.927328886-05:00","updated_at":"2026-01-01T12:22:55.927328886-05:00","labels":["communication-protocol","completion-tracking","ipc"],"dependencies":[{"issue_id":"nb-x43","depends_on_id":"nb-59h","type":"blocks","created_at":"2026-01-01T12:22:57.059297989-05:00","created_by":"daemon"}]}
{"id":"nb-xez","title":"Implement template component system","description":"Implement the component-based template system with registration API, compilation, and attribute evaluation. Support \u003cComponent attr=value/\u003e syntax with expression evaluation.","notes":"Component system implementation progress: 10/14 tests passing. Added validation for malformed component tags (deferred to rendering time). Fixed test_component_missing_self_closing_tag. Remaining: handle various malformed component syntaxes and unclosed tags.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T21:36:41.763531295-05:00","updated_at":"2025-11-09T22:16:22.906241377-05:00","closed_at":"2025-11-09T22:16:22.906241377-05:00","close_reason":"Closed via update"}
{"id":"nb-xh5","title":"Handle empty if conditions with proper error","description":"Detect and report error for {% if %} without any condition expression","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T23:54:29.431937956-05:00","updated_at":"2025-11-11T18:22:40.292666581-05:00","closed_at":"2025-11-11T18:22:40.292666581-05:00","close_reason":"Empty if conditions now properly detected and reported with clear error message during compilation","dependencies":[{"issue_id":"nb-xh5","depends_on_id":"nb-e94","type":"blocks","created_at":"2025-11-09T23:54:29.433976313-05:00","created_by":"daemon"}]}
{"id":"nb-xwl","title":"Template naming and registration design decisions","description":"Record design decisions: single templates directory root, extends uses simple relative paths (base.html, some/dashboard.html), auto-register all template files by relative path, separate directory loader API.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-14T23:16:52.958415496-05:00","updated_at":"2025-11-14T23:17:01.632752195-05:00","closed_at":"2025-11-14T23:17:01.632752195-05:00","close_reason":"Design decisions recorded and approved by user"}
{"id":"nb-y1w","title":"Implement filter pipeline too many arguments error (test_filter_pipeline_too_many_arguments)","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T23:55:12.253363565-05:00","updated_at":"2025-11-12T22:57:53.372415913-05:00","closed_at":"2025-11-12T22:57:53.372415913-05:00","close_reason":"Completed filter pipeline too many arguments error implementation"}
{"id":"nb-y4t","title":"Implement default filter","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T23:38:40.140079753-05:00","updated_at":"2025-11-12T23:38:24.206601092-05:00","closed_at":"2025-11-12T23:38:24.206601092-05:00","close_reason":"Completed default filter implementation with comprehensive tests"}
{"id":"nb-ys2","title":"Add developer documentation with EmmyLua annotations","description":"Add comprehensive EmmyLua annotations to all Lua code for better IDE support and developer experience.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T23:23:50.750413433-05:00","updated_at":"2025-11-30T18:39:30.782959264-05:00","closed_at":"2025-11-30T18:39:30.782959264-05:00","close_reason":"Completed during implementation","dependencies":[{"issue_id":"nb-ys2","depends_on_id":"nb-e06","type":"blocks","created_at":"2025-11-09T23:23:50.752020797-05:00","created_by":"daemon"}]}
{"id":"nb-yt2","title":"Complete template engine core infrastructure","description":"Finish Phase 1 of template engine implementation: extend tokenizer for advanced syntax and build robust expression parser with proper property access support. This is a focused task on core infrastructure improvements.","design":"Phase 1 Core Infrastructure:\n- Extend tokenizer for advanced syntax (filters, comments, whitespace control, etc.)\n- Fix expression parser bugs (property access user.name, complex expressions)\n- Implement safe navigation (?.) if needed\n- Ensure robust tokenization of all planned syntax elements\n- Add comprehensive tests for expression parsing","acceptance_criteria":"Tokenizer handles all planned syntax elements. Expression parser correctly handles property access, complex expressions, and edge cases. All expression parsing tests pass.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T23:09:40.386340778-05:00","updated_at":"2025-11-09T23:19:13.340317434-05:00","closed_at":"2025-11-09T23:19:13.340317434-05:00","close_reason":"Completed expression parser fixes for property access. All expression parsing tests now pass, including basic property access (user.name), default values (user.name or \"Anonymous\"), and complex nested access (user.profile.settings.theme).","dependencies":[{"issue_id":"nb-yt2","depends_on_id":"nb-dgw","type":"blocks","created_at":"2025-11-09T23:09:40.394922121-05:00","created_by":"daemon"}]}
{"id":"nb-yuj","title":"Implement config validation for templates.directory type checking","description":"Implement validation in Config.load() to ensure templates.directory is a string. This covers the test_config_validation_invalid_directory_type test case.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-17T23:19:58.113095741-05:00","updated_at":"2025-11-17T23:30:06.81553675-05:00","closed_at":"2025-11-17T23:30:06.81553675-05:00","close_reason":"Implemented Config.validate() function that checks templates.directory is a string, added validation call to Config.load(), and fixed test assertions"}
{"id":"nb-zfh","title":"Achieve 100% test coverage with luatest","description":"Write comprehensive tests to achieve 100% statement coverage for all template engine code using luatest framework.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T23:23:46.909767451-05:00","updated_at":"2025-11-30T18:38:36.113414146-05:00","closed_at":"2025-11-30T18:38:36.113414146-05:00","close_reason":"Not a goal - cancelled pursuit of 100% test coverage","dependencies":[{"issue_id":"nb-zfh","depends_on_id":"nb-e06","type":"blocks","created_at":"2025-11-09T23:23:46.911066222-05:00","created_by":"daemon"}]}
{"id":"nb-zi5","title":"Implement test_basic_inheritance - basic template inheritance with block override","description":"Implement test case for basic template inheritance: {% extends %} with {% block %} override functionality.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-14T23:25:55.626495577-05:00","updated_at":"2025-11-14T23:55:45.814812424-05:00","closed_at":"2025-11-14T23:55:45.814812424-05:00","close_reason":"Formatting issues fixed by user"}
{"id":"nb-ziw","title":"Handle nil collection in for loops gracefully","description":"Ensure {% for item in nil %} doesn't crash and produces empty output","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-11T18:51:50.656944744-05:00","updated_at":"2025-11-11T22:44:36.126602941-05:00","closed_at":"2025-11-11T22:44:36.126602941-05:00","close_reason":"Closed via update"}
{"id":"nibiru-398","title":"Design template component system","description":"Design the component-based template system that will make templates easy for AI to create and compose. Define component structure, registration, and usage patterns.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-08T22:46:44.812724075-05:00","updated_at":"2025-11-09T15:42:14.029586034-05:00","closed_at":"2025-11-09T15:42:14.029586034-05:00","close_reason":"Duplicate of completed template design work"}
{"id":"nibiru-7ld","title":"Design template component system","description":"Design the component-based template system that will make templates easy for AI to create and compose. Define component structure, registration, and usage patterns.","design":"Component-based template system design decisions:\n- Components use Capital naming (Button, not button) to distinguish from HTML elements\n- XML-style syntax: \u003cButton class=\\\"primary\\\" text=\\\"Save\\\"/\u003e\n- Components inlined during compilation (no function call overhead)\n- Template string registration API\n- Top-level templates compile to single functions with everything inlined\n- Self-closing syntax: \u003cButton/\u003e for simple components, \u003cButton\u003e\u003c/Button\u003e for content\n- Compilation: Components become inline string concatenation in final function\n- ERROR SEMANTICS: Compile-time validation of component names with clear error messages\n- Validation: Registry lookup during compilation, suggests corrections for typos","acceptance_criteria":"Design document completed with syntax specification","notes":"Final test of auto-sync functionality","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-08T22:48:44.452692648-05:00","updated_at":"2025-11-09T00:46:09.328010509-05:00","closed_at":"2025-11-09T00:46:09.328010509-05:00","close_reason":"Component system design completed"}
{"id":"nibiru-gw2","title":"Design template component system","description":"Design the component-based template system that will make templates easy for AI to create and compose. Define component structure, registration, and usage patterns.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-08T22:46:46.265236982-05:00","updated_at":"2025-11-09T15:42:13.70562478-05:00","closed_at":"2025-11-09T15:42:13.70562478-05:00","close_reason":"Duplicate of completed template design work","dependencies":[{"issue_id":"nibiru-gw2","depends_on_id":"nibiru-398","type":"blocks","created_at":"2025-11-08T22:48:46.871927458-05:00","created_by":"daemon"}]}
{"id":"nibiru-py7","title":"Complete component-based template engine","description":"Finish the template engine with component-based architecture optimized for AI development. Focus on predictable structure, minimal syntax, and composable components.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-08T22:46:43.920063789-05:00","updated_at":"2025-11-09T15:42:13.405718008-05:00","closed_at":"2025-11-09T15:42:13.405718008-05:00","close_reason":"Duplicate of nibiru-dgw"}
